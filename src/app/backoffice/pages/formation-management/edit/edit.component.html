<div class="app-wrapper">
  <div class="app-content pt-3 p-md-3 p-lg-4">
    <div class="container-xl">
      <h1 class="app-page-title mb-4">{{ isEditMode ? '✏️ Modifier' : '➕ Créer' }} une Formation</h1>

      <form *ngIf="formation" (ngSubmit)="onSubmit()" #formationForm="ngForm" class="card p-4 shadow-sm">
        <div class="row g-3">

          <div class="col-md-6">
            <label class="form-label fw-semibold">Nom *</label>
            <input class="form-control" [(ngModel)]="formation.nom" name="nom" required />
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Type de formation *</label>
            <select class="form-select" [(ngModel)]="formation.typeFormation" name="typeFormation" required>
              <option value="THEORIQUE">Théorique</option>
              <option value="PRATIQUE">Pratique</option>
              <option value="MIXTE">Mixte</option>
            </select>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Date début *</label>
            <input type="date" class="form-control" [(ngModel)]="formation.dateDebut" name="dateDebut" required />
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Date fin *</label>
            <input type="date" class="form-control" [(ngModel)]="formation.dateFin" name="dateFin" required />
          </div>

          <div class="col-md-12">
            <label class="form-label fw-semibold">Lieu *</label>
            <input class="form-control" [(ngModel)]="formation.lieu" name="lieu" required />
          </div>

          <div class="col-md-12">
            <label class="form-label fw-semibold">Description</label>
            <textarea class="form-control" rows="3" [(ngModel)]="formation.description" name="description"></textarea>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Capacité *</label>
            <input type="number" class="form-control" [(ngModel)]="formation.capacity" name="capacity" required />
          </div>

          <div class="col-md-6">
            <div class="form-check mt-4">
              <input type="checkbox" class="form-check-input" [(ngModel)]="formation.certification" name="certification" id="certifCheckbox" />
              <label for="certifCheckbox" class="form-check-label fw-semibold">Formation certifiante</label>
            </div>
          </div>

          <div class="col-md-6" *ngIf="formation.certification">
            <label class="form-label fw-semibold">Note minimum pour certificat *</label>
            <input type="number" class="form-control" [(ngModel)]="formation.noteMinPourCertificat" name="noteMinPourCertificat" />
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Image</label>
            <input type="file" class="form-control" (change)="onFileSelected($event)" />
            <div *ngIf="getImagePreview()" class="mt-2">
              <img [src]="getImagePreview()" class="img-thumbnail" width="120" />
            </div>
          </div>

          <div class="col-12 d-flex justify-content-between pt-3">
            <button type="button" class="btn btn-outline-secondary" (click)="onCancel()">Annuler</button>
            <button type="submit" class="btn btn-primary" [disabled]="!formationForm.form.valid">
              {{ isEditMode ? 'Mettre à jour' : 'Créer' }}
            </button>
          </div>

        </div>
      </form>
    </div>
  </div>
</div>
